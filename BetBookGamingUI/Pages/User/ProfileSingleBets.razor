@page "/ProfileSingleBets"
@attribute [Authorize]
@inject IUserData userData
@inject AuthenticationStateProvider authProvider
@inject ITeamData teamData
@inject IGameData gameData
@inject IConfiguration config

<PageTitle>SINGLE BETS</PageTitle>



<div class="user-profile-reg">

    <div>
        <div class="label-container">
            <h3 style="font-weight: 700">@loggedInUser?.DisplayName's Single Bets</h3>
        </div>
        <div class="item">
            <p>Pending Payout: $@Convert.ToDecimal(totalPendingPayout).ToString("#,##0.00")</p>
        </div>
        <div class="item">
            <p>Pending Refund: $@Convert.ToDecimal(totalPendingRefund).ToString("#,##0.00")</p>
        </div>
        <div style="text-align: center;margin-bottom: 1em;margin-top: 1em;">
            <button class="site-btn btn site-btn-light btn-sm text-uppercase" @onclick="PayoutUnpaidWinningBets">Collect My Winnings</button>
        </div>
        <div style="text-align: center;margin-bottom: 2em;">
            <button class="site-btn btn site-btn-light btn-sm text-uppercase" @onclick="RefundUnpaidPushBets">Refund My Push Bets</button>
        </div>
    </div>


    <div class="bets">

        <RegBetList BetType="Open"
                    BetList="bettorInProgressBets"/>

        <RegBetList BetType="Winning"
                    BetList="bettorWinningBetsUnpaid"/>

        <RegBetList BetType="Push"
                    BetList="bettorPushBetsUnpaid"/>
    </div>

</div>



@code {
    private UserModel? loggedInUser;

    private IEnumerable<TeamModel>? teams;


    private decimal totalPendingPayout;

    private decimal totalPendingRefund;

    protected override async Task OnInitializedAsync()
    {
        loggedInUser = await authProvider.GetUserFromAuth(userData);

    }

    /// <summary>
    /// Async method pays the user all unpaid 
    /// payouts
    /// </summary>
    /// <returns></returns>
    private async Task PayoutUnpaidWinningBets()
    {

    }

    /// <summary>
    /// Async method refunds all unpaid push bets
    /// </summary>
    /// <returns></returns>
    private async Task RefundUnpaidPushBets()
    {

    }
}